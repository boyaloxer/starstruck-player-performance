<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Starstruck Player Performance Calculator</title>
  <style>
    :root {
      --bg: #0b1220;
      --card: #111a2b;
      --accent: #6ee7ff;
      --muted: #9fb3c8;
      --danger: #ff6b6b;
      --ok: #38d39f;
      --text: #e6eef6;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell,
        Helvetica, Arial, sans-serif;
      background: linear-gradient(180deg, #0b1220, #0a0f19);
      color: var(--text);
    }

    .wrap {
      max-width: 880px;
      margin: 40px auto;
      padding: 24px;
    }

    .card {
      background: var(--card);
      border: 1px solid #1d2940;
      border-radius: 16px;
      padding: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
    }

    h1 {
      margin: 0 0 8px;
      font-size: 28px;
    }

    p {
      color: var(--muted);
      margin: 6px 0 18px;
    }

    .grid {
      display: grid;
      grid-template-columns: 1fr 120px;
      gap: 12px;
      align-items: center;
    }

    .row {
      display: contents;
    }

    label {
      font-weight: 600;
    }

    .field label {
      display: block;
      margin-bottom: 6px;
    }

    .field {
      margin-bottom: 16px;
    }

    .reason-block {
      grid-column: 1 / -1;
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-top: 4px;
    }

    .reason-block label {
      font-weight: 500;
      color: var(--muted);
      font-size: 13px;
    }

    input[type="number"] {
      width: 100%;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid #2a3958;
      background: #0c1425;
      color: var(--text);
      font-size: 15px;
    }

    input[type="number"]:focus {
      outline: 2px solid var(--accent);
      border-color: transparent;
    }

    .reason-input {
      width: 100%;
      min-height: 64px;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid #2a3958;
      background: #0c1425;
      color: var(--text);
      font-size: 14px;
      resize: vertical;
    }

    .reason-input:focus {
      outline: 2px solid var(--accent);
      border-color: transparent;
    }

    input[type="text"] {
      width: 100%;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid #2a3958;
      background: #0c1425;
      color: var(--text);
      font-size: 15px;
    }

    input[type="text"]:focus {
      outline: 2px solid var(--accent);
      border-color: transparent;
    }

    .stack {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 14px;
      align-items: center;
    }

    button {
      cursor: pointer;
      border: 1px solid #2a3958;
      background: #0c1425;
      color: var(--text);
      padding: 10px 14px;
      border-radius: 12px;
      font-weight: 700;
    }

    button.primary {
      background: linear-gradient(90deg, #41b3ff, #6ee7ff);
      color: #031222;
      border: none;
    }

    .result {
      display: flex;
      gap: 16px;
      align-items: baseline;
      margin-top: 12px;
    }

    .result .score {
      font-size: 36px;
      font-weight: 900;
    }

    .pill {
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 12px;
      border: 1px solid #2a3958;
      color: var(--muted);
    }

    .warn {
      color: var(--danger);
    }

    .ok {
      color: var(--ok);
    }

    details {
      margin-top: 18px;
    }

    summary {
      cursor: pointer;
      color: var(--accent);
    }

    .weights {
      margin-top: 8px;
      color: var(--muted);
      font-size: 14px;
    }

  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Starstruck Player Performance Calculator</h1>
      <p>
        Enter 0–10 for each metric. Attendance is measured 0–100%.
      </p>

      <div class="field">
        <label for="playerName">Player Name</label>
        <input
          id="playerName"
          type="text"
          placeholder="Enter player name"
          autocomplete="off"
        />
      </div>

      <div class="grid" id="form">
        <div class="row">
          <label for="adapt">Adaptability</label>
          <input id="adapt" type="number" min="0" max="10" step="0.1" value="10" />
          <div class="reason-block">
            <label for="adaptReason">Reason</label>
            <textarea
              id="adaptReason"
              class="reason-input"
              placeholder="Reason for Adaptability score"
            ></textarea>
          </div>
        </div>
        <div class="row">
          <label for="mech">Mechanics Execution</label>
          <input id="mech" type="number" min="0" max="10" step="0.1" value="10" />
          <div class="reason-block">
            <label for="mechReason">Reason</label>
            <textarea
              id="mechReason"
              class="reason-input"
              placeholder="Reason for Mechanics Execution score"
            ></textarea>
          </div>
        </div>
        <div class="row">
          <label for="class">Class Specific Execution</label>
          <input id="class" type="number" min="0" max="10" step="0.1" value="10" />
          <div class="reason-block">
            <label for="classReason">Reason</label>
            <textarea
              id="classReason"
              class="reason-input"
              placeholder="Reason for Class Specific Execution score"
            ></textarea>
          </div>
        </div>
        <div class="row">
          <label for="prep">Raid Prep</label>
          <input id="prep" type="number" min="0" max="10" step="0.1" value="10" />
          <div class="reason-block">
            <label for="prepReason">Reason</label>
            <textarea
              id="prepReason"
              class="reason-input"
              placeholder="Reason for Raid Prep score"
            ></textarea>
          </div>
        </div>
        <div class="row">
          <label for="raw">Raw Parses</label>
          <input id="raw" type="number" min="0" max="10" step="0.1" value="10" />
          <div class="reason-block">
            <label for="rawReason">Reason</label>
            <textarea
              id="rawReason"
              class="reason-input"
              placeholder="Reason for Raw Parses score"
            ></textarea>
          </div>
        </div>
        <div class="row">
          <label for="attitude">Attitude</label>
          <input id="attitude" type="number" min="0" max="10" step="0.1" value="10" />
          <div class="reason-block">
            <label for="attitudeReason">Reason</label>
            <textarea
              id="attitudeReason"
              class="reason-input"
              placeholder="Reason for Attitude score"
            ></textarea>
          </div>
        </div>
        <div class="row">
          <label for="attend">Attendance % (flag if &lt; 80%)</label>
          <input id="attend" type="number" min="0" max="100" step="1" value="100" />
        </div>
      </div>

      <div class="stack">
        <button id="reset">Reset to 10s</button>
      </div>

      <div class="result">
        <div>Total:</div>
        <div class="score" id="total">10.00</div>
        <div class="pill" id="outOf100">100.00 / 100</div>
        <div id="attnFlag" class="pill"></div>
      </div>

      <details>
        <summary>Show weights & formula</summary>
        <div class="weights" id="weights"></div>
      </details>
    </div>

  </div>

  <script>
    const weights = {
      adapt: 0.3,
      mech: 0.25,
      class: 0.2,
      prep: 0.1,
      raw: 0.05,
      attitude: 0.05,
    };

    const activeWeightSum = Object.values(weights).reduce(
      (acc, value) => acc + value,
      0,
    );

    function clamp(value, min, max) {
      const num = Number(value);
      if (!Number.isFinite(num)) {
        return 0;
      }
      return Math.max(min, Math.min(max, num));
    }

    function calc() {
      const get = (id) => document.getElementById(id);

      ["adapt", "mech", "class", "prep", "raw", "attitude"].forEach((id) => {
        const element = get(id);
        element.value = clamp(element.value, 0, 10);
      });

      const attendance = clamp(get("attend").value, 0, 100);

      let sum = 0;
      for (const [id, weight] of Object.entries(weights)) {
        sum += Number(get(id).value) * weight;
      }

      const total10 = sum / activeWeightSum;
      const total100 = total10 * 10;

      const flag = get("attnFlag");
      if (attendance < 80) {
        flag.textContent = `ATTENDANCE: ${attendance.toFixed(0)}% (FLAG)`;
        flag.className = "pill warn";
        get("total").textContent = "0.00";
        get("outOf100").textContent = "0.00 / 100";
        return;
      }

      flag.textContent = `Attendance OK: ${attendance.toFixed(0)}%`;
      flag.className = "pill ok";

      get("total").textContent = total10.toFixed(2);
      get("outOf100").textContent = `${total100.toFixed(2)} / 100`;

      const names = {
        adapt: "Adaptability",
        mech: "Mechanics Execution",
        class: "Class Specific Execution",
        prep: "Raid Prep",
        raw: "Raw Parses",
        attitude: "Attitude",
      };

      const weightLines = Object.entries(weights)
        .map(([key, value]) => `${names[key]} — ${(value * 100).toFixed(0)}%`)
        .join("<br>");

      const normalized = `Active Weight Sum = ${(activeWeightSum * 100).toFixed(0)}% (normalized)`;
      get("weights").innerHTML = `${weightLines}<br>${normalized}`;
    }

    document.getElementById("reset").addEventListener("click", () => {
      ["adapt", "mech", "class", "prep", "raw", "attitude"].forEach((id) => {
        document.getElementById(id).value = 10;
      });
      document.getElementById("attend").value = 100;
      document.querySelectorAll(".reason-input").forEach((element) => {
        element.value = "";
      });
      calc();
    });

    document.querySelectorAll("input").forEach((element) => {
      element.addEventListener("input", calc);
    });
    ["adapt", "mech", "class", "prep", "raw", "attitude"].forEach((id) => {
      document.getElementById(id).value = 10;
    });
    document.getElementById("attend").value = 100;
    document.querySelectorAll(".reason-input").forEach((element) => {
      element.value = "";
    });
    calc();
  </script>
</body>
</html>

